- file: state=directory recurse=yes path=/etc/ansible/facts.d mode=0600

- stat: path={{cider_ci_local_facts_file}}
  register: cider_ci_secrets_file_stats

- randstring:
  register: secret 
  when: not cider_ci_secrets_file_stats.stat.exists

- template: src=cider_ci.json
            dest={{cider_ci_local_facts_file}}
  when: not cider_ci_secrets_file_stats.stat.exists

- setup: filter=ansible_local
  when: not cider_ci_secrets_file_stats.stat.exists

- debug: msg='{{ansible_local}}'
